<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merkel Vision - New Layout</title>
    
    <!-- Consolidated Dialog & Form Styles -->
    <link rel="stylesheet" href="css/consolidated-dialog-forms.css">
    
    <!-- Keep existing auth CSS -->
    <link rel="stylesheet" href="css/auth-loading.css?v=1.2.1755401200">
    <link rel="stylesheet" href="css/security-enhanced.css?v=1.2.1755401200">
    
    <!-- Keep immediate auth check -->
    <script src="js/auth-immediate-check.js?v=1.2.1755310728"></script>
</head>

<body>

<!---  EDIT DIALOG FORM AS RENDERED -->

<div id="edit-location-dialog" class="dialog enhanced-center">
      <div class="dialog-header">
        <h3><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>Edit Location</h3>
        <button class="close-dialog">×</button>
      </div>
      <form id="edit-location-form" data-place-id="ChIJua9EsKsd9YgRcTIIOi3Pejg">
        <div class="dialog-content">
          
      <!-- Location Name and Type Row -->
      <div class="location-type-row">


        <div class="form-group location-name">
          <label for="location-name">Film Location *</label>
          <input type="text" id="location-name" name="name" value="Willis Anchor" placeholder="Enter location name" required="">
        </div>
        
        <div class="form-group type-select">
          <label for="location-type">Location Type *</label>
          <select id="location-type" name="type" required="">
            <option value="">Select type...</option>
            <option value="broll">B-Roll</option>
            <option value="interview">Interview</option>
            <option value="live anchor" selected="">Live Anchor</option>
            <option value="live reporter">Live Reporter</option>
            <option value="stakeout">Stakeout</option>
            <option value="headquarters">Headquarters</option>
            <option value="bureau">Bureau</option>
            <option value="office">Office</option>
          </select>
        </div>
        
      </div>

      <!-- Address Components -->
      <div class="form-section">
        <h4>Address Information</h4>
        <div class="address-row">
          <div class="form-group address-number">
            <label for="location-number">Street Number</label>
            <input type="text" id="location-number" name="number" value="1297" placeholder="123" maxlength="10" pattern="[0-9]{1,10data-place-id" title="Enter up to 10 digits">
          </div>
          <div class="form-group address-street">
            <label for="location-street">Street Name</label>
            <input type="text" id="location-street" name="street" value="Willis Mill Road Southwest" placeholder="Main Street">
          </div>
        </div>
        
        <div class="address-row">
          <div class="form-group form-group-flex-2">
            <label for="location-city">City *</label>
            <input type="text" id="location-city" name="city" value="Atlanta" placeholder="City" required="">
          </div>
          <div class="form-group form-group-flex-1">
            <label for="location-state">State *</label>
            <select id="location-state" name="state" required="">
              <option value="">Select State...</option>
              <option value="AL">Alabama</option>
              <option value="AK">Alaska</option>
              <option value="AS">American Samoa</option>
              <option value="AZ">Arizona</option>
              <option value="AR">Arkansas</option>
              <option value="CA">California</option>
              <option value="CO">Colorado</option>
              <option value="CT">Connecticut</option>
              <option value="DC">District of Columbia</option>
              <option value="DE">Delaware</option>
              <option value="FL">Florida</option>
              <option value="GA" selected="">Georgia</option>
              <option value="GU">Guam</option>
              <option value="HI">Hawaii</option>
              <option value="ID">Idaho</option>
              <option value="IL">Illinois</option>
              <option value="IN">Indiana</option>
              <option value="IA">Iowa</option>
              <option value="KS">Kansas</option>
              <option value="KY">Kentucky</option>
              <option value="LA">Louisiana</option>
              <option value="ME">Maine</option>
              <option value="MD">Maryland</option>
              <option value="MA">Massachusetts</option>
              <option value="MI">Michigan</option>
              <option value="MN">Minnesota</option>
              <option value="MS">Mississippi</option>
              <option value="MO">Missouri</option>
              <option value="MT">Montana</option>
              <option value="NE">Nebraska</option>
              <option value="NV">Nevada</option>
              <option value="NH">New Hampshire</option>
              <option value="NJ">New Jersey</option>
              <option value="NM">New Mexico</option>
              <option value="NY">New York</option>
              <option value="NC">North Carolina</option>
              <option value="ND">North Dakota</option>
              <option value="MP">Northern Mariana Islands</option>
              <option value="OH">Ohio</option>
              <option value="OK">Oklahoma</option>
              <option value="OR">Oregon</option>
              <option value="PA">Pennsylvania</option>
              <option value="PR">Puerto Rico</option>
              <option value="RI">Rhode Island</option>
              <option value="SC">South Carolina</option>
              <option value="SD">South Dakota</option>
              <option value="TN">Tennessee</option>
              <option value="TX">Texas</option>
              <option value="TT">Trust Territories</option>
              <option value="UT">Utah</option>
              <option value="VT">Vermont</option>
              <option value="VI">Virgin Islands</option>
              <option value="VA">Virginia</option>
              <option value="WA">Washington</option>
              <option value="WV">West Virginia</option>
              <option value="WI">Wisconsin</option>
              <option value="WY">Wyoming</option>
            </select>
          </div>
          <div class="form-group form-group-flex-1">
            <label for="location-zipcode">ZIP Code</label>
            <input type="text" id="location-zipcode" name="zipcode" value="30311" placeholder="12345" maxlength="5" title="Enter 5-digit ZIP code">
          </div>
        </div>
        
        <!-- Live Address Preview -->
        <div class="address-preview">
          <label>Address Preview:</label>
          <div class="address-display">1297 Willis Mill Road Southwest, Atlanta, GA 30311, USA</div>
        </div>
        
        <!-- Hidden field for formatted address -->
        <input type="hidden" name="formatted_address" value="1297 Willis Mill Road Southwest, Atlanta, GA 30311, USA">
        
        <!-- Hidden field for place_id -->
        <input type="hidden" name="place_id" value="ChIJua9EsKsd9YgRcTIIOi3Pejg">
      </div>

      <!-- Coordinates Display -->
      <div class="type-coordinates-row">
        <div class="form-group coordinates-display-col">
          <label>Coordinates</label>
          <div class="coordinates-display">
            Lat: 33.72034222211823°, Lng: -84.4699342651367°
          </div>
          <input type="hidden" name="lat" value="33.72034222211823">
          <input type="hidden" name="lng" value="-84.4699342651367">
        </div>
      </div>

      <!-- Production Details -->
      <div class="form-section">
        <h4>Production Details</h4>
        <div class="form-group">
          <label for="location-production-notes">Production Notes</label>
          <textarea id="location-production-notes" name="production_notes" maxlength="500" placeholder="Notes about this location for production use..."></textarea>
          <div class="char-count">0/500 characters</div>
        </div>
        
        <div class="address-row">
          <div class="form-group form-group-flex-1">
            <label for="location-parking">Parking *</label>
            <select id="location-parking" name="parking" required="">
              <option value="">Parking...</option>
              <option value="street">On Street</option>
              <option value="driveway">Driveway</option>
              <option value="parking garage">Parking Garage</option>
              <option value="parking lot">Parking Lot</option>
              <option value="see production notes" selected="">See Prod Notes</option>
            </select>
          </div>
          <div class="form-group form-group-flex-1">
            <label for="location-entry-point">Entry Point *</label>
            <select id="location-entry-point" name="entry_point" required="">
              <option value="">Gear Entry Point...</option>
              <option value="front door">Front Door</option>
              <option value="backdoor">Back Door</option>
              <option value="loading dock">Loading Dock</option>
              <option value="see production notes" selected="">See Prod Notes</option>
            </select>
          </div>
          <div class="form-group form-group-flex-1">
            <label for="location-access">Access *</label>
            <select id="location-access" name="access" required="">
              <option value="">Gear Ramps...</option>
              <option value="ramp">Accessible Ramp</option>
              <option value="stairs only">Stairs Only</option>
              <option value="passenger elevator">Passenger Elevator</option>
              <option value="freight elevator">Freight Elevator</option>
              <option value="porter skycap">Porter/Skycap</option>
              <option value="see production notes" selected="">See Prod Notes</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Photos Section -->
      <div class="form-section">
        <h4>Photos</h4>
        
        <!-- Existing Photos Display -->
        <div id="existing-photos-container" class="existing-photos">
          <div class="existing-photos-grid" id="existing-photos-grid">
      <div class="photos-empty">
        <div class="photos-empty-icon">📷</div>
        <p>No photos available for this location</p>
      </div>
    </div>
        </div>
        
        <!-- Photo Upload Section -->
        <div class="photo-upload-section">
          <!-- File Input (hidden but functional) -->
          <input type="file" id="edit-photo-file-input" accept="image/jpeg,image/png,image/webp" multiple="" class="hidden-file-input">
          
          <!-- Primary Upload Area (clickable drop zone) -->
          <div class="photo-drop-zone" id="edit-photo-drop-zone">
            <div class="drop-zone-content">
              <div class="drop-zone-icon">📁</div>
              <div class="drop-zone-text">
                <strong class="drop-zone-main-text">Click to select photos</strong>
                <div class="drop-zone-subtext">
                  Or drag and drop photos here<br>
                  JPG, PNG, WebP up to 10MB each
                </div>
              </div>
            </div>
          </div>
          
          <!-- Photo Previews -->
          <div class="photo-previews" id="edit-photo-preview">
            <!-- Previews will be added here dynamically -->
          </div>
        </div>
      </div>
    
        </div>
        <div class="dialog-actions">
          <button type="submit" class="primary-btn">Save Changes</button>
          <button type="button" class="secondary-btn close-dialog">Cancel</button>
        </div>
      </form>
    </div>

    
    <!-- SAVE DIALOG FORM AS RENDERED -->

<div id="save-location-dialog" class="dialog enhanced-center">
      <div class="dialog-header">
        <h3>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg>Save New Location</h3>
          <button class="close-dialog">×</button>
      </div>
       <div class="dialog-content">
       <form id="save-location-form" class="save-location-form">
          
      <!-- Location Name and Type Row -->
      <div class="location-type-row">


        <div class="form-group location-name">
          <label for="location-name">Film Location *</label>
          <input type="text" id="location-name" name="name" value="2337 Venetian Dr SW, Atlanta, GA 30311, USA" placeholder="Enter location name" required="">
        </div>
        
        <div class="form-group type-select">
          <label for="location-type">Location Type *</label>
          <select id="location-type" name="type" required="">
            <option value="">Select type...</option>
            <option value="broll">B-Roll</option>
            <option value="interview">Interview</option>
            <option value="live anchor">Live Anchor</option>
            <option value="live reporter">Live Reporter</option>
            <option value="stakeout">Stakeout</option>
            <option value="headquarters">Headquarters</option>
            <option value="bureau">Bureau</option>
            <option value="office">Office</option>
          </select>
        </div>
        
      </div>

      <!-- Address Components -->
      <div class="form-section">
        <h4>Address Information</h4>
        <div class="address-row">
          <div class="form-group address-number">
            <label for="location-number">Street Number</label>
            <input type="text" id="location-number" name="number" value="2337" placeholder="123" maxlength="10" pattern="[0-9]{1,10width" title="Enter up to 10 digits">
          </div>
          <div class="form-group address-street">
            <label for="location-street">Street Name</label>
            <input type="text" id="location-street" name="street" value="Venetian Drive Southwest" placeholder="Main Street">
          </div>
        </div>
        
        <div class="address-row">
          <div class="form-group form-group-flex-2">
            <label for="location-city">City *</label>
            <input type="text" id="location-city" name="city" value="Atlanta" placeholder="City" required="">
          </div>
          <div class="form-group form-group-flex-1">
            <label for="location-state">State *</label>
            <select id="location-state" name="state" required="">
              <option value="">Select State...</option>
              <option value="AL">Alabama</option>
              <option value="AK">Alaska</option>
              <option value="AS">American Samoa</option>
              <option value="AZ">Arizona</option>
              <option value="AR">Arkansas</option>
              <option value="CA">California</option>
              <option value="CO">Colorado</option>
              <option value="CT">Connecticut</option>
              <option value="DC">District of Columbia</option>
              <option value="DE">Delaware</option>
              <option value="FL">Florida</option>
              <option value="GA" selected="">Georgia</option>
              <option value="GU">Guam</option>
              <option value="HI">Hawaii</option>
              <option value="ID">Idaho</option>
              <option value="IL">Illinois</option>
              <option value="IN">Indiana</option>
              <option value="IA">Iowa</option>
              <option value="KS">Kansas</option>
              <option value="KY">Kentucky</option>
              <option value="LA">Louisiana</option>
              <option value="ME">Maine</option>
              <option value="MD">Maryland</option>
              <option value="MA">Massachusetts</option>
              <option value="MI">Michigan</option>
              <option value="MN">Minnesota</option>
              <option value="MS">Mississippi</option>
              <option value="MO">Missouri</option>
              <option value="MT">Montana</option>
              <option value="NE">Nebraska</option>
              <option value="NV">Nevada</option>
              <option value="NH">New Hampshire</option>
              <option value="NJ">New Jersey</option>
              <option value="NM">New Mexico</option>
              <option value="NY">New York</option>
              <option value="NC">North Carolina</option>
              <option value="ND">North Dakota</option>
              <option value="MP">Northern Mariana Islands</option>
              <option value="OH">Ohio</option>
              <option value="OK">Oklahoma</option>
              <option value="OR">Oregon</option>
              <option value="PA">Pennsylvania</option>
              <option value="PR">Puerto Rico</option>
              <option value="RI">Rhode Island</option>
              <option value="SC">South Carolina</option>
              <option value="SD">South Dakota</option>
              <option value="TN">Tennessee</option>
              <option value="TX">Texas</option>
              <option value="TT">Trust Territories</option>
              <option value="UT">Utah</option>
              <option value="VT">Vermont</option>
              <option value="VI">Virgin Islands</option>
              <option value="VA">Virginia</option>
              <option value="WA">Washington</option>
              <option value="WV">West Virginia</option>
              <option value="WI">Wisconsin</option>
              <option value="WY">Wyoming</option>
            </select>
          </div>
          <div class="form-group form-group-flex-1">
            <label for="location-zipcode">ZIP Code</label>
            <input type="text" id="location-zipcode" name="zipcode" value="30311" placeholder="12345" maxlength="5" title="Enter 5-digit ZIP code">
          </div>
        </div>
        
        <!-- Live Address Preview -->
        <div class="address-preview">
          <label>Address Preview:</label>
          <div class="address-display">2337 Venetian Drive Southwest, Atlanta, GA 30311, USA</div>
        </div>
        
        <!-- Hidden field for formatted address -->
        <input type="hidden" name="formatted_address" value="2337 Venetian Drive Southwest, Atlanta, GA 30311, USA">
        
        <!-- Hidden field for place_id -->
        <input type="hidden" name="place_id" value="ChIJCSwwLuIc9YgR8CXZWVCHl8w">
      </div>

      <!-- Coordinates Display -->
      <div class="type-coordinates-row">
        <div class="form-group coordinates-display-col">
          <label>Coordinates</label>
          <div class="coordinates-display">
            Lat: 33.719967422315975°, Lng: -84.46559992734562°
          </div>
          <input type="hidden" name="lat" value="33.719967422315975">
          <input type="hidden" name="lng" value="-84.46559992734562">
        </div>
      </div>

      <!-- Production Details -->
      <div class="form-section">
        <h4>Production Details</h4>
        <div class="form-group">
          <label for="location-production-notes">Production Notes</label>
          <textarea id="location-production-notes" name="production_notes" maxlength="500" placeholder="Notes about this location for production use..."></textarea>
          <div class="char-count">0/500 characters</div>
        </div>
        
        <div class="address-row">
          <div class="form-group form-group-flex-1">
            <label for="location-parking">Parking *</label>
            <select id="location-parking" name="parking" required="">
              <option value="">Parking...</option>
              <option value="street">On Street</option>
              <option value="driveway">Driveway</option>
              <option value="parking garage">Parking Garage</option>
              <option value="parking lot">Parking Lot</option>
              <option value="see production notes">See Prod Notes</option>
            </select>
          </div>
          <div class="form-group form-group-flex-1">
            <label for="location-entry-point">Entry Point *</label>
            <select id="location-entry-point" name="entry_point" required="">
              <option value="">Gear Entry Point...</option>
              <option value="front door">Front Door</option>
              <option value="backdoor">Back Door</option>
              <option value="loading dock">Loading Dock</option>
              <option value="see production notes">See Prod Notes</option>
            </select>
          </div>
          <div class="form-group form-group-flex-1">
            <label for="location-access">Access *</label>
            <select id="location-access" name="access" required="">
              <option value="">Gear Ramps...</option>
              <option value="ramp">Accessible Ramp</option>
              <option value="stairs only">Stairs Only</option>
              <option value="passenger elevator">Passenger Elevator</option>
              <option value="freight elevator">Freight Elevator</option>
              <option value="porter skycap">Porter/Skycap</option>
              <option value="see production notes">See Prod Notes</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Photos Section -->
      <div class="form-section">
        <h4>Photos</h4>
        
        <!-- Existing Photos Display -->
        <div id="existing-photos-container" class="existing-photos">
          <div class="existing-photos-grid" id="existing-photos-grid">
            <!-- Photos will be loaded here by LocationPhotoManager -->
          </div>
        </div>
        
        <!-- Photo Upload Section -->
        <div class="photo-upload-section">
          <!-- File Input (hidden but functional) -->
          <input type="file" id="save-photo-file-input" accept="image/jpeg,image/png,image/webp" multiple="" class="hidden-file-input">
          
          <!-- Primary Upload Area (clickable drop zone) -->
          <div class="photo-drop-zone" id="save-photo-drop-zone">
            <div class="drop-zone-content">
              <div class="drop-zone-icon">📁</div>
              <div class="drop-zone-text">
                <strong class="drop-zone-main-text">Click to select photos</strong>
                <div class="drop-zone-subtext">
                  Or drag and drop photos here<br>
                  JPG, PNG, WebP up to 10MB each
                </div>
              </div>
            </div>
          </div>
          
          <!-- Photo Previews -->
          <div class="photo-previews" id="save-photo-preview">
            <!-- Previews will be added here dynamically -->
          </div>

        </div>
      </div>
    
       </form>
        <div class="dialog-actions">
          <button type="submit" class="primary-btn">Save Location</button>
          <button type="button" class="secondary-btn close-dialog">Cancel</button>
        </div>
      
    </div>

</div>


    </body>
</html>