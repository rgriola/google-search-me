<!--- 
This file is part of the admin panel for the database do not move. 
--->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database Schema Viewer</title>
    <link rel="stylesheet" href="css/dbViewer.css">
</head>
<body>
    <h1>Database Schema Viewer</h1>
    <div id="auth-status">
        <span id="auth-message">Checking authentication...</span>
    </div>
    
    <h2>Database Files</h2>
    <ul>
        <li><a href="#locations-db">locations.db</a></li>
    </ul>
    
    <hr>
    
    <div id="locations-db">
        <h2>locations.db</h2>
        <p>SQLite Database containing user accounts, saved locations, and session data.</p>
        
        <h3>Tables</h3>
        <ul>
            <li><a href="#table-users">users</a> - User accounts and authentication</li>
            <li><a href="#table-saved-locations">saved_locations</a> - Location data saved by users</li>
            <li><a href="#table-location-photos">location_photos</a> - Photos associated with locations</li>
            <li><a href="#table-user-saves">user_saves</a> - Relationship between users and their saved locations</li>
            <li><a href="#table-user-sessions">user_sessions</a> - User session management</li>
            <li><a href="#table-sqlite-sequence">sqlite_sequence</a> - System table (AUTOINCREMENT sequences)</li>
        </ul>
        
        <hr>
        
        <div id="table-users">
            <h3>users Table</h3>
            <button data-action="loadTable" data-table="users">Load Data</button>
            <div id="schema-users"></div>
            <div id="data-users"></div>
        </div>
        
        <hr>
        
        <div id="table-saved-locations">
            <h3>saved_locations Table</h3>
            <div class="filter-controls">
                <strong>üè¢ Permanent Location Filters:</strong>
                <button data-action="loadTable" data-table="saved_locations" class="filter-btn">Show All</button>
                <button data-action="filterLocations" data-filter="permanent" class="filter-btn">Permanent Only</button>
                <button data-action="filterLocations" data-filter="regular" class="filter-btn">Regular Only</button>
                <button data-action="filterLocations" data-filter="headquarters" class="filter-btn">Headquarters</button>
                <button data-action="filterLocations" data-filter="bureau" class="filter-btn">Bureau</button>
                <button data-action="filterLocations" data-filter="office" class="filter-btn">Office</button>
            </div>
            <button data-action="loadTable" data-table="saved_locations">Load Data</button>
            <div id="schema-saved_locations"></div>
            <div id="data-saved_locations"></div>
        </div>
        
        <hr>
        
        <div id="table-location-photos">
            <h3>location_photos Table</h3>
            <button data-action="loadTable" data-table="location_photos">Load Data</button>
            <div id="schema-location_photos"></div>
            <div id="data-location_photos"></div>
        </div>
        
        <hr>
        
        <div id="table-user-saves">
            <h3>user_saves Table</h3>
            <button data-action="loadTable" data-table="user_saves">Load Data</button>
            <div id="schema-user_saves"></div>
            <div id="data-user_saves"></div>
        </div>
        
        <hr>
        
        <div id="table-user-sessions">
            <h3>user_sessions Table</h3>
            <button data-action="loadTable" data-table="user_sessions">Load Data</button>
            <div id="schema-user_sessions"></div>
            <div id="data-user_sessions"></div>
        </div>
    </div>

    <hr>
    
    <div class="danger-zone">
        <h2>‚ö†Ô∏è Danger Zone</h2>
        <p>
            <strong>WARNING:</strong> This action will permanently delete ALL data from ALL tables in the database 
            AND all photos from ImageKit cloud storage. This cannot be undone!
        </p>
        <p>
            <strong>This includes:</strong>
        </p>
        <ul>
            <li>All user accounts and sessions</li>
            <li>All saved locations</li>
            <li>All photos from ImageKit cloud storage</li>
            <li>All other database records</li>
        </ul>
        <button id="deleteAllBtn" data-action="confirmDeleteAllData">
            üóëÔ∏è Delete All Data & Photos
        </button>
    </div>

    <script type="module" src="js/database-viewer.js"></script>
</body>
</html>
